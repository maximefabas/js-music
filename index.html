<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <script type="module">
      import * as m from './dist/index.js'

      function assert (label, assertion) {
        if (Array.isArray(assertion)) assertion.forEach((innerAssertion, pos) => assert(`${label} (${pos})`, innerAssertion))
        else if (typeof assertion === 'function') {
          if (assertion() === false) throw new Error(`üö´ FAILURE: "${label}""`)
          else console.info(`‚úÖ SUCCESS: "${label}"`)
        }
        else if (assertion === false) throw new Error(`üö´ FAILURE: "${label}""`)
        else console.info(`‚úÖ SUCCESS: "${label}"`)
      }

      /* PitchClassLetter */
      console.log('-- PitchClassLetter --')
      assert('PitchClassLetters amount is 7', m.pitchClassLettersNamesArr.length === 7)
      assert('PitchClassLetter value 0 is named c', m.pitchClassLetterValueToName(0) === 'c')
      assert('PitchClassLetter value 3 is named f', m.pitchClassLetterValueToName(3) === 'f')
      assert('PitchClassLetter any value above 7 is named c', () => new Array(100)
        .fill(null)
        .map((_, pos) => (pos + 8))
        .every(value => m.pitchClassLetterValueToName(value) === 'c')
      )
      assert('PitchClassLetter g value is 4', m.pitchClassLetterNameToValue('g') === 4)
      assert('PitchClassLetter b value is 6', m.pitchClassLetterNameToValue('b') === 6)
      assert('PitchClassLetter ehz!r!hearhaa value is 6', m.pitchClassLetterNameToValue('ehz!r!hearhaa') === 5)
      assert('PitchClassLetter h value is undefined', m.pitchClassLetterNameToValue('h') === undefined)
      
      /* Alteration */
      console.log('-- Alteration --')
      assert('Alteration of -2 is named √ü√ü', m.alterationValueToName(-2) === '√ü√ü')
      assert('Alteration of 3 is named ###', m.alterationValueToName(3) === '###')
      
      /* PitchClass */
      console.log('-- PitchClass --')
      assert('PitchClass value { alt: 2, ptch: 2 } is named ##e', m.pitchClassValueToName({
        alteration: 2,
        pitchClassLetter: 2
      }) === '##e')
      assert('PitchClass value { alt: -1, ptch: 20 } is named √üc', m.pitchClassValueToName({
        alteration: -1,
        pitchClassLetter: 20
      }) === '√üc')
      assert('PitchClass name √ü√üf has value { alt: -2, ptch: 3 }', () => {
        const { alteration, pitchClassLetter } = m.pitchClassNameToValue('√ü√üf')
        return alteration === -2 && pitchClassLetter === 3
      })
      assert('PitchClass name z has value undefined', m.pitchClassNameToValue('z') === undefined)
      
      /* Octave */
      console.log('-- Octave --')
      assert('Octave with value 4 has name 4', m.octaveValueToName(4) === '4')
      assert('Octave with name 4 has value 4', m.octaveNameToValue('4') === 4)
      
      /* Pitch */
      console.log('-- Pitch --')
      assert('Pitch with value { oct: 4, ptch: { ptch: 0, alt: 1 } } has name #c^4', m.pitchValueToName({
        pitchClass: { pitchClassLetter: 0, alteration: 1 },
        octave: 4
      }) === '#c^4')
      assert('Pitch name √ü√üg^-2 has value of { oct: -2, ptch: { ptch: 4, alt: -2 } }', () => {
        const { pitchClass: { pitchClassLetter, alteration }, octave } = m.pitchNameToValue('√ü√üg^-2')
        return pitchClassLetter === 4
          && alteration === -2
          && octave === -2
      })
      
      /* SimpleInterval */
      console.log('-- SimpleInterval --')
      assert('SimpleInterval with value 3/-2 name is √ü√ü4', m.simpleIntervalValueToName({
        simpleIntervalClass: 3,
        alteration: -2
      }) === '√ü√ü4')
      assert('SimpleInterval with value -3/-2 name is √ü√ü5', m.simpleIntervalValueToName({
        simpleIntervalClass: -3,
        alteration: -2
      }) === '√ü√ü5')
      assert('SimpleInterval with value 55/4 name is ####7', m.simpleIntervalValueToName({
        simpleIntervalClass: 55,
        alteration: 4
      }) === '####7')
      assert('SimpleInterval with name √ü7 has value 6/-1', () => {
        const { simpleIntervalClass, alteration } = m.simpleIntervalNameToValue('√ü7')
        return simpleIntervalClass === 6 && alteration === -1
      })
      assert('SimpleInterval with name #9 has value 1/1', () => {
        const { simpleIntervalClass, alteration } = m.simpleIntervalNameToValue('#9')
        return simpleIntervalClass === 1 && alteration === 1
      })
      assert('SimpleInterval with value 1/1 inversion has value 6/-2', () => {
        const { simpleIntervalClass, alteration } = m.simpleIntervalInvert({
          simpleIntervalClass: 1,
          alteration: 1
        })
        return simpleIntervalClass === 6 && alteration === -2
      })
      assert('SimpleInterval with value -2/4 inversion has value 2/-5', () => {
        const { simpleIntervalClass, alteration } = m.simpleIntervalInvert({
          simpleIntervalClass: -2,
          alteration: 4
        })
        return simpleIntervalClass === 2 && alteration === -5
      })
      assert('SimpleInterval with value 8/0 inversion has value 6/-1', () => {
        const { simpleIntervalClass, alteration } = m.simpleIntervalInvert({
          simpleIntervalClass: 8,
          alteration: 0
        })
        return simpleIntervalClass === 6 && alteration === -1
      })
      assert('simpleIntervalSemitonesValuesArr has correct values', m.simpleIntervalSemitonesValuesArr.length === 7
        && m.simpleIntervalSemitonesValuesArr.every((value, valuePos) => [0, 2, 4, 5, 7, 9, 11][valuePos] === value))
      assert('SimpleInterval of √ü2 invertion is 7', m.simpleIntervalValueToName(
        m.simpleIntervalInvert(
          m.simpleIntervalNameToValue('√ü2')
        )
      ) === '7')
      assert('SimpleInterval of #8 invertion is √ü1', m.simpleIntervalValueToName(
        m.simpleIntervalInvert(
          m.simpleIntervalNameToValue('#8')
        )
      ) === '√ü1')
      assert('SimpleInterval of √ü4 is 4 semitones', m.simpleIntervalToSemitones(
        m.simpleIntervalNameToValue('√ü4')
      ) === 4)
      assert('SimpleInterval of ###7 is 14 semitones', m.simpleIntervalToSemitones(
        m.simpleIntervalNameToValue('###7')
      ) === 14)
      assert('SsimpleInterval between pitchClasses c and d is 2', m.simpleIntervalValueToName(
        m.simpleIntervalFromPitchClasses(
          m.pitchClassNameToValue('c'),
          m.pitchClassNameToValue('√üd')
        )
      ) === '√ü2')
      assert('SimpleInterval between pitchClasses b and d is √ü3', m.simpleIntervalValueToName(
        m.simpleIntervalFromPitchClasses(
          m.pitchClassNameToValue('b'),
          m.pitchClassNameToValue('d')
        )
      ) === '√ü3')
      assert('SimpleInterval between pitchClasses a and √ü√üb is √ü√ü2', m.simpleIntervalValueToName(
        m.simpleIntervalFromPitchClasses(
          m.pitchClassNameToValue('a'),
          m.pitchClassNameToValue('√ü√üb')
        )
      ) === '√ü√ü2')
      assert('SimpleInterval #3 becomes Interval #17 rised by 2 octaves', m.intervalValueToName(
        m.simpleIntervalToInterval({
          simpleIntervalClass: 2,
          alteration: 1
        }, 2)
      ) === '#17')
      assert('SimpleInterval √ü2 added to PitchClass #b gives PitchClass #c', m.pitchClassValueToName(
        m.addSimpleIntervalToPitchClass(
          m.simpleIntervalNameToValue('√ü2'),
          m.pitchClassNameToValue('#b')
        ) === '#c'
      ))
      assert('SimpleInterval #2 added to PitchClass √ü√üa gives PitchClass √üb', m.pitchClassValueToName(
        m.addSimpleIntervalToPitchClass(
          m.simpleIntervalNameToValue('#2'),
          m.pitchClassNameToValue('√ü√üa')
        ) === '√üb'
      ))

      assert('SimpleInterval √ü2 subtracted to PitchClass #c gives PitchClass #b', m.pitchClassValueToName(
        m.subtractSimpleIntervalToPitchClass(
          m.simpleIntervalNameToValue('√ü2'),
          m.pitchClassNameToValue('#c')
        ) === '#b'
      ))
      assert('SimpleInterval #2 subtracted to PitchClass √ü√üb gives PitchClass √üa', m.pitchClassValueToName(
        m.subtractSimpleIntervalToPitchClass(
          m.simpleIntervalNameToValue('#2'),
          m.pitchClassNameToValue('√ü√üb')
        ) === '√üa'
      ))

      /* Interval */
      console.log('-- Interval --')
      assert('Interval with value 3/-2 name is √ü√ü4', m.intervalValueToName({
        intervalClass: 3,
        alteration: -2
      }) === '√ü√ü4')
      assert('Interval with value -3/-2 name is √ü√ü-4', m.intervalValueToName({
        intervalClass: -3,
        alteration: -2
      }) === '√ü√ü-4')
      assert('Interval with value 55/4 name is ####56', m.intervalValueToName({
        intervalClass: 55,
        alteration: 4
      }) === '####56')
      assert('Interval with name √ü7 has value 6/-1', () => {
        const { intervalClass, alteration } = m.intervalNameToValue('√ü7')
        return intervalClass === 6 && alteration === -1
      })
      assert('Interval with name #9 has value 8/1', () => {
        const { intervalClass, alteration } = m.intervalNameToValue('#9')
        return intervalClass === 8 && alteration === 1
      })
      assert('Interval with name -14 has value -13/0', () => {
        const { intervalClass, alteration } = m.intervalNameToValue('-14')
        return intervalClass === -13 && alteration === 0
      })
      assert('Interval of √ü√ü-17 is √ü√ü6 as a SimpleInterval', m.simpleIntervalValueToName(
        m.intervalToSimpleInterval(
          m.intervalNameToValue('√ü√ü-17')
        )
      ) === '√ü√ü6')
      assert('Interval of -12 is -19 semitones', m.intervalToSemitones(
        m.intervalNameToValue('-12')
      ) === -19)
      assert('Interval of 1 is 0 semitones', m.intervalToSemitones(
        m.intervalNameToValue('1')
      ) === 0)
      assert('Interval of √ü√ü3 is 2 semitones', m.intervalToSemitones(
        m.intervalNameToValue('√ü√ü3')
      ) === 2)
      assert('Interval between pitch b^2 and d^4 is √ü10', m.intervalValueToName(
        m.intervalFromPitches(
          m.pitchNameToValue('b^2'),
          m.pitchNameToValue('d^4')
        )
      ) === '√ü10')
      assert('Interval between pitch a^2 and √ü√üb^1 is √ü√ü-7', m.intervalValueToName(
        m.intervalFromPitches(
          m.pitchNameToValue('a^2'),
          m.pitchNameToValue('√ü√üb^1')
        )
      ) === '√ü√ü-7')
      assert('Interval -2 added to Pitch c^4 gives pitch b^3', m.pitchValueToName(
        m.addIntervalToPitch(
          m.intervalNameToValue('-2'),
          m.pitchNameToValue('c^4')
        )
      ) === 'b^3')
      assert('Interval -√ü√ü2 added to Pitch √ü√üc^4 gives pitch √ü√ü√ü√üb^3', m.pitchValueToName(
        m.addIntervalToPitch(
          m.intervalNameToValue('-√ü√ü2'),
          m.pitchNameToValue('√ü√üc^4')
        )
      ) === '√ü√ü√ü√üb^3')
      assert('Interval √ü5 inverted is #-5', m.intervalValueToName(
        m.intervalInvert(
          m.intervalNameToValue('√ü5')
        )
      ) === '#-5')
      assert('Interval -8 inverted is 8', m.intervalValueToName(
        m.intervalInvert(
          m.intervalNameToValue('-8')
        )
      ) === '8')
      assert('Interval 2 inverted is √ü-2', m.intervalValueToName(
        m.intervalInvert(
          m.intervalNameToValue('2')
        )
      ) === '√ü-2')
      assert('Interval -2 subtracted to Pitch b^3 gives pitch c^4', m.pitchValueToName(
        m.subtractIntervalToPitch(
          m.intervalNameToValue('-2'),
          m.pitchNameToValue('b^3')
        )
      ) === 'c^4')
      assert('Interval -√ü√ü2 subtracted to Pitch √ü√ü√ü√üb^3 gives pitch √ü√üc^4', m.pitchValueToName(
        m.subtractIntervalToPitch(
          m.intervalNameToValue('-√ü√ü2'),
          m.pitchNameToValue('√ü√ü√ü√üb^3')
        )
      ) === '√ü√üc^4')
      
      /* Scale */
      assert('Scale named 1,#4,√ü2,3,#2 orders intervals as follows 1 √ü2 #2 3 #4', m.scaleNameToValue('1,#4,√ü2,3,#2')
        .map(e => m.intervalValueToName(e)).join(' ') === '1 √ü2 #2 3 #4')
      assert('Scale with values 1 √ü3 5 7 is named 1,√ü3,5,7', m.scaleValueToName([
        m.intervalNameToValue('1'),
        m.intervalNameToValue('√ü3'),
        m.intervalNameToValue('5'),
        m.intervalNameToValue('7')
      ]) === '1,√ü3,5,7')
    </script>
  </head>
  <body></body>
</html>
